// Tracking
//  - https://paper.dropbox.com/doc/atom-vscode--B_1pTajtClXUnlRg8vKINs~QAg-h1pVZyCsdouFUaDxCTofw
//
// Docs
//  - shift+cmd+p -> "Preferences: Open Default Keyboard Shortcuts (JSON)"
//    - Reference for default keyboard shortcuts
//    - Reference for all available commands
//  - https://code.visualstudio.com/api/references/commands
//    - Reference for commands that take arguments [do these even work here? haven't tried yet]
//  - https://code.visualstudio.com/api/references/when-clause-contexts
//    - Reference for when clauses
//  - https://github.com/codebling/vs-code-default-keybindings/blob/master/macos.keybindings.json
//    - (Only reference I can find on the web)
//
[

  // Workspace
  // {"key": "cmd+,", "command": "workbench.action.openSettings"}, // (Default) Open Settings editor
  {"key": "shift+cmd+,", "command": "workbench.action.openSettingsJson"}, // Open settings.json
  {"key": "shift+cmd+k", "command": "workbench.action.openGlobalKeybindings"}, // Open Keyboard Shortcuts editor
  {"key": "ctrl+up", "command": "workbench.action.openGlobalKeybindingsFile"}, // Open keybindings.json file
  {"key": "ctrl+shift+r", "command": "workbench.action.reloadWindow"},
  {"key": "alt+cmd+i", "command": "workbench.action.toggleDevTools"},
  {"key": "ctrl+cmd+t", "command": "workbench.action.openRecent"},
  // {"key": "shift+ctrl+cmd+k", "command": "workbench.action.toggleKeybindingsLog"},
  // {"key": "cmd+.", "command": "workbench.action.toggleKeybindingsLog"},
  {"key": "ctrl+shift+cmd+.", "command": "workbench.action.toggleKeybindingsLog"},
  // {"key": "ctrl+shift+cmd+k", "command": "workbench.action.keybindingsReference"},
  {"key": "cmd+r", "command": "-workbench.action.reloadWindow", "when": "isDevelopment"},
  {"key": "cmd+r", "command": "workbench.action.gotoSymbol", "when": "!inSearchEditor"},
  {"key": "shift+cmd+j", "command": "-workbench.action.search.toggleQueryDetails", "when": "inSearchEditor || searchViewletFocus"},
  {"key": "shift+cmd+j", "command": "workbench.action.togglePanel"},

  // Require shift+cmd+w to close a window
  //  - Default: Allow just cmd+w when no editors remaining
  {"key": "cmd+w", "command": "-workbench.action.closeWindow", "when": "!editorIsOpen && !multipleEditorGroups"},

  // Sidebar: Show/hide
  //  - Bug: https://github.com/microsoft/vscode/issues/193737 Focus into Side Bar commands don't focus the sidebar if the sidebar wasn't already visible
  //  - Bug: https://github.com/microsoft/vscode/issues/193741 gitlens doesn't set sideBarFocus, making sidbar keybindings difficult
  {"key": "cmd+\\", "command": "workbench.action.toggleSidebarVisibility"},
  {"key": "shift+cmd+\\", "command": "workbench.action.focusSideBar", "when": "!sideBarFocus"},
  {"key": "shift+cmd+\\", "command": "workbench.action.focusActiveEditorGroup", "when": "sideBarFocus"}, // Unfocus sidebar, but leave it open
  {"key": "escape", "command": "workbench.action.focusActiveEditorGroup", "when": "sideBarFocus && !inputFocus"}, // Unfocus sidebar, but leave it open
  {"key": "shift+escape", "command": "workbench.action.focusActiveEditorGroup", "when": "sideBarFocus"}, // Which of these two do I like better? (pick one)
  {"key": "cmd+escape", "command": "workbench.action.focusActiveEditorGroup", "when": "sideBarFocus"},   // Which of these two do I like better? (pick one)

  // Sidebar: Focus/switch views
  //  - NOTE Must manually keep these number-view mappings up to date as new tabs come and go
  {"key": "shift+cmd+1", "command": "workbench.view.explorer",                  "when": "true"},
  {"key": "shift+cmd+2", "command": "workbench.view.extension.bookmarks",       "when": "true"},
  {"key": "shift+cmd+3", "command": "workbench.view.scm",                       "when": "true"},
  {"key": "shift+cmd+4", "command": "workbench.view.extension.gitlens",         "when": "true"},
  {"key": "shift+cmd+5", "command": "workbench.view.extension.gitlensInspect",  "when": "true"},
  {"key": "shift+cmd+8", "command": "workbench.view.debug",                     "when": "true"},
  {"key": "shift+cmd+9", "command": "workbench.view.extensions",                "when": "true"},
  {"key": "ctrl+tab", "command": "workbench.action.nextSideBarView", "when": "sideBarFocus"},
  {"key": "ctrl+shift+tab", "command": "workbench.action.previousSideBarView", "when": "sideBarFocus"},
  {"key": "shift+cmd+1", "command": "-search.action.replaceAllInFolder", "when": "folderMatchFocus && isEditableItem && replaceActive && searchViewletVisible"},
  {"key": "shift+cmd+1", "command": "-search.action.replaceAllInFile", "when": "fileMatchFocus && isEditableItem && replaceActive && searchViewletVisible"},
  {"key": "shift+cmd+1", "command": "-search.action.replace", "when": "isEditableItem && matchFocus && replaceActive && searchViewletVisible"},
  {"key": "shift+cmd+1", "command": "-editor.action.replaceOne", "when": "editorFocus && findWidgetVisible"},
  {"key": "shift+cmd+e", "command": "-workbench.view.explorer"}, // Disable (conflicts in terminal w/ select line down)
  {"key": "cmd+0", "command": "-workbench.action.focusSideBar"}, // Disable (need it for reset zoom)

  // XXX [after git commit]
  // // Sidebar: Switch views by number
  // //  - NOTE Must manually keep these number-view mappings up to date as new tabs come and go
  // {"key": "cmd+1", "command": "workbench.view.explorer",                  "when": "sideBarFocus && activeViewlet != 'workbench.view.explorer'"},
  // {"key": "cmd+2", "command": "workbench.view.extension.bookmarks",       "when": "sideBarFocus && activeViewlet != 'workbench.view.extension.bookmarks'"},
  // {"key": "cmd+3", "command": "workbench.view.scm",                       "when": "sideBarFocus && activeViewlet != 'workbench.view.scm'"},
  // //  - TODO Enable gitlens views in the sidebar after the fix the sideBarFocus bug (~impossible to make these keybindings work otherwise)
  // //    - https://github.com/gitkraken/vscode-gitlens/issues/2930 gitlens doesn't set sideBarFocus, making sidbar keybindings difficult
  // // {"key": "cmd+4", "command": "workbench.view.extension.gitlens",         "when": "sideBarFocus && activeViewlet != 'workbench.view.extension.gitlens'"},
  // // {"key": "cmd+5", "command": "workbench.view.extension.gitlensInspect",  "when": "sideBarFocus && activeViewlet != 'workbench.view.extension.gitlensInspect'"},
  // {"key": "cmd+4", "command": "workbench.view.debug",                     "when": "sideBarFocus && activeViewlet != 'workbench.view.debug'"},
  // {"key": "cmd+5", "command": "workbench.view.extension.test",            "when": "sideBarFocus && activeViewlet != 'workbench.view.extension.test'"},
  // {"key": "cmd+6", "command": "workbench.view.extensions",                "when": "sideBarFocus && activeViewlet != 'workbench.view.extensions'"},
  // {"key": "cmd+9", "command": "workbench.view.extensions",                "when": "sideBarFocus && activeViewlet != 'workbench.view.extensions'"},

  // Navigate editors (and terminals, notebooks, etc.)
  //  - TODO(practice)
  {"key": "cmd+;", "command": "workbench.action.showAllEditors"},

  // Files
  {"key": "cmd+o", "command": "-workbench.action.files.openFileFolder"},
  {"key": "cmd+o", "command": "-workbench.action.files.openLocalFileFolder", "when": "remoteFileDialogVisible"},
  // advancedOpenFile can't open symlinks, and no longer appears more useful than the default openFile cmd ðŸ¤·
  //  - Actually, it's still the easiest way to create new files by name, so let's keep it around
  {"key": "cmd+o", "command": "extension.advancedOpenFile"},
  {"key": "ctrl+cmd+o", "command": "workbench.action.files.openFile"},
  {"key": "shift+cmd+backspace", "command": "fileutils.removeFile", "when": "editorFocus"},
  {"key": "shift+cmd+c", "command": "-workbench.action.terminal.openNativeConsole", "when": "!terminalFocus"},
  {"key": "shift+cmd+c", "command": "copyFilePath"},
  {"key": "ctrl+cmd+c", "command": "search.action.copyPath", "when": "fileMatchOrFolderMatchWithResourceFocus"},

  // Panes ("editors" and "panels")
  {"key": "ctrl+tab", "command": "workbench.action.nextEditorInGroup", "when": "!sideBarFocus && !panelFocus"},
  {"key": "ctrl+tab", "command": "-workbench.action.quickOpenPreviousRecentlyUsedEditorInGroup"},
  {"key": "ctrl+shift+tab", "command": "workbench.action.previousEditorInGroup", "when": "!sideBarFocus && !panelFocus"},
  {"key": "ctrl+shift+tab", "command": "-workbench.action.quickOpenLeastRecentlyUsedEditorInGroup"},
  {"key": "cmd+h", "command": "workbench.action.focusLeftGroup"},
  {"key": "cmd+k", "command": "-workbench.action.terminal.clear", "when": "terminalFocus && terminalProcessSupported"},
  {"key": "cmd+k", "command": "workbench.action.focusAboveGroup"},
  {"key": "cmd+j", "command": "-workbench.action.togglePanel"},
  {"key": "cmd+j", "command": "workbench.action.focusBelowGroup"},
  {"key": "cmd+l", "command": "-expandLineSelection", "when": "textInputFocus"},
  {"key": "cmd+l", "command": "workbench.action.focusRightGroup"},
  {"key": "ctrl+alt+cmd+l", "command": "workbench.action.splitEditorToRightGroup", "when": "!terminalFocus"},
  {"key": "ctrl+alt+cmd+j", "command": "workbench.action.splitEditorToBelowGroup", "when": "!terminalFocus"},
  {"key": "ctrl+alt+cmd+h", "command": "workbench.action.splitEditorToLeftGroup", "when": "!terminalFocus"},
  {"key": "ctrl+alt+cmd+k", "command": "workbench.action.splitEditorToAboveGroup", "when": "!terminalFocus"},
  {"key": "cmd+1", "command": "workbench.action.openEditorAtIndex1", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+2", "command": "workbench.action.openEditorAtIndex2", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+3", "command": "workbench.action.openEditorAtIndex3", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+4", "command": "workbench.action.openEditorAtIndex4", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+5", "command": "workbench.action.openEditorAtIndex5", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+6", "command": "workbench.action.openEditorAtIndex6", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+7", "command": "workbench.action.openEditorAtIndex7", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+8", "command": "workbench.action.openEditorAtIndex8", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+9", "command": "workbench.action.lastEditorInGroup", "when": "!sideBarFocus && !panelFocus"},
  {"key": "cmd+1", "command": "-workbench.action.focusFirstEditorGroup"},
  {"key": "cmd+2", "command": "-workbench.action.focusSecondEditorGroup"},
  {"key": "cmd+3", "command": "-workbench.action.focusThirdEditorGroup"},
  {"key": "cmd+4", "command": "-workbench.action.focusFourthEditorGroup"},
  {"key": "cmd+5", "command": "-workbench.action.focusFifthEditorGroup"},
  {"key": "cmd+6", "command": "-workbench.action.focusSixthEditorGroup"},
  {"key": "cmd+7", "command": "-workbench.action.focusSeventhEditorGroup"},
  {"key": "cmd+8", "command": "-workbench.action.focusEighthEditorGroup"},
  {"key": "cmd+9", "command": "-workbench.action.lastEditorInGroup"},
  {"key": "ctrl+1", "command": "-workbench.action.openEditorAtIndex1"},
  {"key": "ctrl+2", "command": "-workbench.action.openEditorAtIndex2"},
  {"key": "ctrl+3", "command": "-workbench.action.openEditorAtIndex3"},
  {"key": "ctrl+4", "command": "-workbench.action.openEditorAtIndex4"},
  {"key": "ctrl+5", "command": "-workbench.action.openEditorAtIndex5"},
  {"key": "ctrl+6", "command": "-workbench.action.openEditorAtIndex6"},
  {"key": "ctrl+7", "command": "-workbench.action.openEditorAtIndex7"},
  {"key": "ctrl+8", "command": "-workbench.action.openEditorAtIndex8"},
  {"key": "ctrl+9", "command": "-workbench.action.openEditorAtIndex9"},
  {"key": "alt+cmd+k", "command": "workbench.action.moveEditorToAboveGroup"},
  {"key": "alt+cmd+j", "command": "workbench.action.moveEditorToBelowGroup"},
  {"key": "alt+cmd+h", "command": "workbench.action.moveEditorToLeftGroup"},
  {"key": "alt+cmd+l", "command": "workbench.action.moveEditorToRightGroup"},
  {"key": "ctrl+cmd+h", "command": "workbench.action.moveEditorLeftInGroup"},
  {"key": "ctrl+cmd+l", "command": "workbench.action.moveEditorRightInGroup"},
  {"key": "ctrl+cmd+z", "command": "workbench.action.toggleEditorWidths"}, // Zoom
  {"key": "alt+cmd+t", "command": "-workbench.action.closeOtherEditors"}, // Dangerous, disable

  // Lists
  {"key": "ctrl+e", "command": "list.scrollDown", "when": "listFocus && !inputFocus"},
  {"key": "ctrl+y", "command": "list.scrollUp", "when": "listFocus && !inputFocus"},
  {"key": "ctrl+d", "command": "multiCommand.list.scrollPageDown", "when": "listFocus"},
  {"key": "ctrl+u", "command": "multiCommand.list.scrollPageUp", "when": "listFocus"},
  //  - Find
  //    - TODO(practice)
  // {"key": "cmd+f", "command": "list.find", "when": "listFocus && listSupportsFind"}, // Default
  {"key": "/", "command": "list.find", "when": "listFocus && listSupportsFind"},
  // {"key": "j", "command": "list.focusDown", "when": "listFocus && !inputFocus"}, // Default
  // {"key": "k", "command": "list.focusUp", "when": "listFocus && !inputFocus"}, // Default
  // {"key": "down", "command": "list.focusDown", "when": "listFocus && !inputFocus"}, // Default
  // {"key": "up", "command": "list.focusUp", "when": "listFocus && !inputFocus"}, // Default
  {"key": "cmd+g", "command": "list.focusDown", "when": "listFocus"},
  {"key": "shift+cmd+g", "command": "list.focusUp", "when": "listFocus"},

  // Editor
  {"key": "ctrl+space", "command": "editor.action.showHover"}, // Alias for gh (vim)
  // {"key": "cmd+.", "command": "editor.action.quickFix"}, // Default
  {"key": "shift+cmd+.", "command": "editor.action.openLink"},
  {"key": "ctrl+cmd+w", "command": "editor.action.toggleWordWrap"},
  {"key": "alt+z", "command": "-editor.action.toggleWordWrap"},
  {"key": "ctrl+cmd+g", "command": "jdanbrown.editor.toggleGutter"},
  {"key": "shift+cmd+.", "command": "-breadcrumbs.focusAndSelect", "when": "breadcrumbsPossible && breadcrumbsVisible"},
  {"key": "shift+cmd+.", "command": "-editor.action.inPlaceReplace.down", "when": "editorTextFocus && !editorReadonly"},
  {"key": "shift+cmd+.", "command": "-breadcrumbs.toggleToOn", "when": "!config.breadcrumbs.enabled"},
  {"key": "shift+cmd+.", "command": "-editor.action.accessibleViewGoToSymbol", "when": "accessibilityHelpIsShown && accessibleViewGoToSymbolSupported || accessibleViewGoToSymbolSupported && accessibleViewIsShown"},
  // {"key": "cmd+d", "command": "editor.action.addSelectionToNextFindMatch", "when": "editorFocus"}, // Default
  {"key": "alt+cmd+d", "command": "editor.action.moveSelectionToNextFindMatch", "when": "editorFocus"},
  // {"key": "shift+cmd+l", "command": "editor.action.selectHighlights", "when": "editorFocus"}, // Default
  {"key": "ctrl+8", "command": "highlightwords.addHighlight"},

  // Move lines up/down
  //  - TODO(practice)
  {"key": "ctrl+cmd+j", "command": "editor.action.moveLinesDownAction", "when": "editorTextFocus && !editorReadonly"},
  {"key": "ctrl+cmd+k", "command": "editor.action.moveLinesUpAction", "when": "editorTextFocus && !editorReadonly"},
  {"key": "alt+down", "command": "-editor.action.moveLinesDownAction", "when": "editorTextFocus && !editorReadonly"},
  {"key": "alt+up", "command": "-editor.action.moveLinesUpAction", "when": "editorTextFocus && !editorReadonly"},

  // vim
  //  - Unshadow vim redo
  {"key": "ctrl+r", "command": "-workbench.action.openRecent"},
  //  - shift+esc is a common typo when typing fast with shift
  {"key": "shift+escape", "command": "extension.vim_escape", "when": "vim.active && !inDebugRepl && vim.mode != 'Normal'"},

  // Symbols
  {"key": "shift+cmd+r", "command": "workbench.action.showAllSymbols"},

  // Multi-cursor
  {"key": "ctrl+j", "command": "editor.action.insertCursorBelow", "when": "editorTextFocus"},
  {"key": "alt+cmd+down", "command": "-editor.action.insertCursorBelow", "when": "editorTextFocus"},
  {"key": "cmd+u", "command": "-cursorUndo", "when": "textInputFocus"},

  // Search Editor
  //  - https://github.com/VSCodeVim/Vim/issues/6619 Focus next search result enters visual mode
  //  - https://github.com/VSCodeVim/Vim/issues/3372 How to disable Visual Mode in VSCodeVim?
  //  - https://github.com/VSCodeVim/Vim/issues/7254 <C-Up> and <C-Down> cause editor to enter Visual mode #7254
  //  - https://github.com/VSCodeVim/Vim/issues/5716 Select Mode
  {"key": "shift+cmd+f", "command": "search.action.openNewEditorToSide"},
  {"key": "shift+cmd+f", "command": "-workbench.view.search", "when": "!searchViewletVisible"},
  {"key": "shift+cmd+f", "command": "-workbench.action.findInFiles"},
  {"key": "escape", "command": "multiCommand.search.action.unfocusQueryEditorWidget", "when": "inSearchEditor && searchInputBoxFocus"},
  {"key": "cmd+f", "command": "search.action.focusQueryEditorWidget", "when": "inSearchEditor"},
  {"key": "escape", "command": "-search.action.focusQueryEditorWidget", "when": "inSearchEditor"},
  {"key": "/", "command": "search.action.focusQueryEditorWidget", "when": "inSearchEditor && !searchInputBoxFocus"},
  {"key": "ctrl+/", "command": "toggleSearchEditorRegex", "when": "inSearchEditor && searchInputBoxFocus"},
  {"key": "ctrl+c", "command": "toggleSearchEditorCaseSensitive", "when": "inSearchEditor && searchInputBoxFocus"},
  {"key": "ctrl+w", "command": "toggleSearchEditorWholeWord", "when": "inSearchEditor && searchInputBoxFocus"},
  {"key": "ctrl+-", "command": "decreaseSearchEditorContextLines", "when": "inSearchEditor"},
  {"key": "ctrl+=", "command": "increaseSearchEditorContextLines", "when": "inSearchEditor"},
  {"key": "ctrl+r", "command": "rerunSearchEditorSearch", "when": "inSearchEditor"},
  {"key": "shift+cmd+r", "command": "-rerunSearchEditorSearch", "when": "inSearchEditor"}, // Confusion with symbols search
  {"key": "cmd+g", "command": "search.action.focusNextSearchResult", "when": "inSearchEditor"},
  {"key": "shift+cmd+g", "command": "search.action.focusPreviousSearchResult", "when": "inSearchEditor"},
  {"key": "ctrl+n", "command": "search.action.focusNextSearchResult", "when": "inSearchEditor"},
  {"key": "ctrl+p", "command": "search.action.focusPreviousSearchResult", "when": "inSearchEditor"},
  // {"key": "j", "command": "search.action.focusNextSearchResult", "when": "inSearchEditor && !searchInputBoxFocus"},     // Nope, eats normal mode key
  // {"key": "k", "command": "search.action.focusPreviousSearchResult", "when": "inSearchEditor && !searchInputBoxFocus"}, // Nope, eats normal mode key
  {"key": "backspace", "command": "search.searchEditor.action.deleteFileResults", "when": "inSearchEditor && !searchInputBoxFocus"},
  {"key": "shift+cmd+backspace", "command": "-search.searchEditor.action.deleteFileResults", "when": "inSearchEditor"}, // Confusion with File Delete
  //  - To open results, use Peek Definition / Go To Definition
  //    - TODO(practice)
  //    - https://code.visualstudio.com/docs/editor/codebasics#_search-editor
  //      - Use Goto/Peek on the results
  //    - https://stackoverflow.com/questions/63106163/vscode-navigate-search-editor-using-keyboard-only/63107297#63107297
  //      - Use Goto/Peek on the filename headers to peek all of its results at once -- useful!
  //    - Confusingly, the "search.action.*" commands are for the Search sidebar panel, they don't work in the Search Editor
  //      - https://github.com/microsoft/vscode/issues/193855 Search Editor: Can't open result with any keybindings, only with double-click
  //    - TODO After they fix this issue, add shift+o for open-to-the-side (like double-click)
  //      - https://github.com/microsoft/vscode/issues/194044 Search Editor: Add keybinding for double-click action, e.g. to open to the side
  {"key": "ctrl+o", "command": "editor.action.peekDefinition", "when": "inSearchEditor && !searchInputBoxFocus"}, // ctrl to be fluid w/ ctrl+n/ctrl+p
  {"key": "o", "command": "editor.action.revealDefinition", "when": "inSearchEditor && !searchInputBoxFocus"}, // Open result in current editor group
  // {"key": "shift+o", "command": "...", "when": "inSearchEditor && !searchInputBoxFocus"}, // Open result to the side

  // Navigation
  //  - TODO(practice)
  {"key": "cmd+]", "command": "workbench.action.navigateForward", "when": "canNavigateForward"},
  {"key": "cmd+[", "command": "workbench.action.navigateBack", "when": "canNavigateBack"},
  {"key": "ctrl+]", "command": "editor.action.revealDefinition", "when": "editorHasDefinitionProvider && editorTextFocus && !isInEmbeddedEditor"},
  {"key": "ctrl+[", "command": "multiCommand.addHighlightAnd.editor.action.goToReferences", "when": "editorHasReferenceProvider && editorTextFocus && !inReferenceSearchEditor && !isInEmbeddedEditor"},
  {"key": "ctrl+cmd+]", "command": "editor.action.peekDefinition", "when": "editorHasDefinitionProvider && editorTextFocus && !isInEmbeddedEditor"},
  {"key": "ctrl+cmd+[", "command": "multiCommand.addHighlightAnd.editor.action.referenceSearch.trigger", "when": "editorHasReferenceProvider && editorTextFocus && !inReferenceSearchEditor && !isInEmbeddedEditor"},

  // Git
  //  - Duplicated in:
  //    - keybindings.json -> Git
  //    - settings.json -> vim.normalModeKeyBindingsNonRecursive
  //    - settings.json -> vim.visualModeKeyBindingsNonRecursive
  //  - These keys are for when not in vim in an editor view (e.g. sidebar panel, Settings editor)
  //  - Don't make any "g *" keys here _with editorFocus_, else vim.normalModeKeyBindings will stop receiving "g *" keys
  //    - e.g. {"key": "g s", "command": "workbench.view.scm", "when": "!inputFocus || editorFocus && vim.mode =~ /^(Normal|Visual.*)$/"},
  //    - [Or maybe it is possible? https://github.com/VSCodeVim/Vim#remapping-more-complex-key-combinations]
  //  - Wishlist
  //    - A command for Stage/Unstage File in the gs list view
  //      - https://github.com/microsoft/vscode/issues/194214 In Source Control view, add commands/keybindings for "Stage File" / "Unstage File"
  //      - https://github.com/microsoft/vscode/issues/24916 SCM: Support keyboard shortcuts
  //    - A command for Stage/Unstage Current Hunk in Diff Editor view
  //      - https://github.com/microsoft/vscode/issues/26067 SCM: Add "stage ranges" action/button to diff view
  //    - A command for Open Staged Changes from an editor, like the existing Open Changes (gd)
  //      - [TODO Open issue]
  //  - Views
  {"key": "g s", "command": "workbench.view.scm", "when": "!inputFocus"},
  {"key": "g l", "command": "gitlens.showCommitsView", "when": "!inputFocus"},
  {"key": "g b", "command": "gitlens.showBranchesView", "when": "!inputFocus"},
  {"key": "g t", "command": "gitlens.showTagsView", "when": "!inputFocus"},
  {"key": "g r", "command": "gitlens.showRemotesView", "when": "!inputFocus"},
  //  - Diff editor
  {"key": "ctrl+n", "command": "workbench.action.compareEditor.nextChange", "when": "textCompareEditorActive"},
  {"key": "ctrl+p", "command": "workbench.action.compareEditor.previousChange", "when": "textCompareEditorActive"},
  //  - Commands
  {"key": "g shift+a", "command": "git.stageAll", "when": "sideBarFocus && activeViewlet == 'workbench.view.scm'"},
  {"key": "g shift+u", "command": "git.unstageAll", "when": "sideBarFocus && activeViewlet == 'workbench.view.scm'"},
  {"key": "g c", "command": "git.commitStaged", "when": "sideBarFocus && activeViewlet == 'workbench.view.scm'"},
  // {"key": "g shift+c", "command": "git.commitStagedAmend", "when": "sideBarFocus && activeViewlet == 'workbench.view.scm'"}, // Want?

  // Project Manager
  {"key": "ctrl+cmd+p", "command": "projectManager.listProjectsNewWindow"},
  {"key": "alt+cmd+p", "command": "-projectManager.listProjects"}, // Remove to avoid confusion (this cmd blats over current workspace)

  // Emoji/unicode
  //  - https://github.com/brunnerh/insert-unicode -- shift+cmd+i
  //  - https://github.com/mattbierner/vscode-emojisense -- cmd+i
  //    - TODO Remove emojisense if insert-unicode adds a command to insert emoji only
  //      - https://github.com/brunnerh/insert-unicode/issues/43
  //      - insert-unicode has better usability (recents, favorites, etc.)
  {"key": "shift+cmd+i", "command": "insert-unicode.insertText", "when": "editorTextFocus"},
  {"key": "cmd+i", "command": "emojisense.quickEmoji", "when": "editorTextFocus"}, // Default

  // Terminal
  //  - Switch to vscode's default terminals instead of our custom userInitTs.terminal.new (in init.ts) that uses `tmux-new-or-attach`
  {"key": "cmd+t", "command": "workbench.action.createTerminalEditor", "when": "terminalProcessSupported"},
  {"key": "cmd+t", "command": "-workbench.action.showAllSymbols"},
  {"key": "alt+cmd+t", "command": "userInitTs.terminal.new", "when": "terminalProcessSupported"},
  //  - Disable cmd+w to close terminals (unsafe!), only editors
  //    - cmd+w on terminals is too dangerous because we can no longer do shift+cmd+t to reopen an accidentally closed terminal (^D the shell instead)
  {"key": "cmd+w", "command": "-workbench.action.terminal.killEditor", "when": "terminalEditorFocus && terminalFocus && terminalHasBeenCreated && resourceScheme == 'vscode-terminal' || terminalEditorFocus && terminalFocus && terminalProcessSupported && resourceScheme == 'vscode-terminal'"},
  {"key": "cmd+w", "command": "-workbench.action.closeActiveEditor"},
  {"key": "cmd+w", "command": "workbench.action.closeActiveEditor", "when": "!terminalFocus"},
  //  - Recall recent cmds/dirs
  {"key": "cmd+r", "command": "workbench.action.terminal.runRecentCommand", "when": "terminalFocusInAny && terminalHasBeenCreated && !terminalAltBufferActive || terminalFocusInAny && terminalProcessSupported && !terminalAltBufferActive"},
  //    - Disable cmd+g for Go To Dir (conflicts with Find Next)
  {"key": "shift+cmd+c", "command": "workbench.action.terminal.goToRecentDirectory", "when": "terminalFocus && terminalHasBeenCreated || terminalFocus && terminalProcessSupported"},
  {"key": "cmd+g", "command": "-workbench.action.terminal.goToRecentDirectory", "when": "terminalFocus && terminalHasBeenCreated || terminalFocus && terminalProcessSupported"},
  //  - Scroll/select with keyboard
  //    - TODO(practice)
  {"key": "cmd+u", "command": "jdanbrown.terminal.scrollUpHalfPage", "when": "terminalFocusInAny && terminalHasBeenCreated && !terminalAltBufferActive || terminalFocusInAny && terminalProcessSupported && !terminalAltBufferActive"},
  {"key": "cmd+d", "command": "jdanbrown.terminal.scrollDownHalfPage", "when": "terminalFocusInAny && terminalHasBeenCreated && !terminalAltBufferActive || terminalFocusInAny && terminalProcessSupported && !terminalAltBufferActive"},
  {"key": "cmd+y", "command": "workbench.action.terminal.scrollUp", "when": "terminalFocusInAny && terminalHasBeenCreated && !terminalAltBufferActive || terminalFocusInAny && terminalProcessSupported && !terminalAltBufferActive"},
  {"key": "cmd+e", "command": "workbench.action.terminal.scrollDown", "when": "terminalFocusInAny && terminalHasBeenCreated && !terminalAltBufferActive || terminalFocusInAny && terminalProcessSupported && !terminalAltBufferActive"},
  {"key": "shift+cmd+y", "command": "workbench.action.terminal.selectToPreviousLine", "when": "terminalFocusInAny && terminalHasBeenCreated && !terminalAltBufferActive || terminalFocusInAny && terminalProcessSupported && !terminalAltBufferActive"},
  {"key": "shift+cmd+e", "command": "workbench.action.terminal.selectToNextLine", "when": "terminalFocusInAny && terminalHasBeenCreated && !terminalAltBufferActive || terminalFocusInAny && terminalProcessSupported && !terminalAltBufferActive"},
  // {"key": "shift+cmd+up", "command": "workbench.action.terminal.selectToPreviousCommand", "when": "terminalFocus && terminalHasBeenCreated || terminalFocus && terminalProcessSupported"}, // Default
  // {"key": "shift+cmd+down", "command": "workbench.action.terminal.selectToNextCommand", "when": "terminalFocus && terminalHasBeenCreated || terminalFocus && terminalProcessSupported"}, // Default
  //  - Hacky replacement for tmux ^K with normal vscode terminals
  //    - https://github.com/microsoft/vscode/issues/181390
  //    - https://code.visualstudio.com/docs/editor/accessibility#_terminal-accessibility -> focusAccessibleBuffer
  //    - This is pretty cool -- turns the whole terminal into a normal editor buffer, for easy copy/paste
  //    - Like tmux ^K but actually maybe better? (assuming it works on big scrollbacks!)
  //    - NOTE Had to remove accessibilityModeEnabled from the `when`, because enabling editor.accessibilitySupport would probably affect a lot of things
  {"key": "ctrl+k", "command": "workbench.action.terminal.focusAccessibleBuffer", "when": "terminalFocus && terminalHasBeenCreated && terminalTabFocusMode || terminalFocus && terminalHasBeenCreated && !terminalAccessibleBufferFocus || terminalFocus && terminalProcessSupported && terminalTabFocusMode || terminalFocus && terminalProcessSupported && !terminalAccessibleBufferFocus"},
  // Open detected links
  //  - TODO(practice)
  // {"key": "shift+cmd+o", "command": "workbench.action.terminal.openDetectedLink", "when": "terminalAccessibleBufferFocus && terminalHasBeenCreated || terminalFocus && terminalHasBeenCreated"}, // Default
  {"key": "shift+cmd+.", "command": "workbench.action.terminal.openDetectedLink", "when": "terminalAccessibleBufferFocus && terminalHasBeenCreated || terminalFocus && terminalHasBeenCreated"},

  // Notebooks
  {"key": "cmd+[", "command": "-editor.action.outdentLines", "when": "editorTextFocus && !editorReadonly"},
  {"key": "cmd+]", "command": "-editor.action.indentLines", "when": "editorTextFocus && !editorReadonly"},
  {"key": "shift+cmd+]", "command": "-workbench.action.nextEditor"},
  {"key": "shift+cmd+[", "command": "-workbench.action.previousEditor"},
  {"key": ", ,", "command": "workbench.action.files.save", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "escape", "command": "notebook.cell.quitEdit", "when": "notebookEditorFocused && vim.active && !inDebugRepl && vim.mode == 'Normal'"},
  {"key": "shift+escape", "command": "notebook.cell.quitEdit", "when": "notebookEditorFocused && vim.active && !inDebugRepl"},
  {"key": "i", "command": "notebook.cell.edit", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "shift+i", "command": "multiCommand.notebook.cell.edit.InsertMode", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "cmd+]", "command": "notebook.focusNextEditor", "when": "notebookEditorFocused && inputFocus"},
  {"key": "cmd+[", "command": "notebook.focusPreviousEditor", "when": "notebookEditorFocused && inputFocus"},
  {"key": "cmd+]", "command": "list.focusDown", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "cmd+[", "command": "list.focusUp", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "u", "command": "undo", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "z", "command": "-undo", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "z z", "command": "notebook.centerActiveCell", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "z z", "command": "notebook.centerActiveCell", "when": "notebookEditorFocused && vim.active && !inDebugRepl && vim.mode == 'Normal'"},
  //  - Disable j/k movements at cell boundaries, more often confusing than helpful
  //    - Ref: notebookEditorCursorAtBoundary = 'none' | 'top' | 'bottom' | 'both'
  //    - https://github.com/microsoft/vscode/blob/f25f1abf/src/vs/workbench/contrib/notebook/common/notebookCommon.ts#L687-L688
  {"key": "j", "command": "-notebook.focusNextEditor", "when": "editorTextFocus && inputFocus && notebookEditorFocused && vim.mode == 'Normal' && notebookEditorCursorAtBoundary != 'none' && notebookEditorCursorAtBoundary != 'top'"},
  {"key": "k", "command": "-notebook.focusPreviousEditor", "when": "editorTextFocus && inputFocus && notebookEditorFocused && vim.mode == 'Normal' && notebookEditorCursorAtBoundary != 'bottom' && notebookEditorCursorAtBoundary != 'none'"},
  //  - Move cells up/down
  {"key": "ctrl+cmd+j", "command": "notebook.cell.moveDown", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "ctrl+cmd+k", "command": "notebook.cell.moveUp", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  //  - Folding
  {"key": "h", "command": "notebook.fold", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  {"key": "l", "command": "notebook.unfold", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  //  - Scrolling
  {"key": "ctrl+e", "command": "list.scrollDown", "when": "notebookEditorFocused && inputFocus"},
  {"key": "ctrl+y", "command": "list.scrollUp", "when": "notebookEditorFocused && inputFocus"},
  {"key": "ctrl+d", "command": "multiCommand.list.scrollPageDown", "when": "notebookEditorFocused && listFocus && inputFocus"},
  {"key": "ctrl+u", "command": "multiCommand.list.scrollPageUp", "when": "notebookEditorFocused && listFocus && inputFocus"},
  //  - Kernel management
  //    - TODO YOU ARE HERE (these maybe all work now? try and see)
  {"key": "ctrl+cmd+k", "command": "jupyter.switchKernel", "when": "notebookEditorFocused"},
  {"key": "ctrl+c", "command": "jupyter.notebookeditor.interruptkernel", "when": "notebookEditorFocused"},
  {"key": "0 0", "command": "jupyter.notebookeditor.restartkernel", "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"},
  //  - TODO Needs update: Add missing when clauses + update to latest notebook commands
  // {"key": "cmd+]", "command": "jupyter.gotoNextCellInFile", "when": "editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},
  // {"key": "ctrl+alt+]", "command": "-jupyter.gotoNextCellInFile", "when": "editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},
  // {"key": "cmd+[", "command": "jupyter.gotoPrevCellInFile", "when": "editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},
  // {"key": "ctrl+alt+[", "command": "-jupyter.gotoPrevCellInFile", "when": "editorTextFocus && jupyter.hascodecells && !notebookEditorFocused"},
  // {"key": "ctrl+cmd+r", "command": "jupyter.notebookeditor.runallcells"},
  // {"key": "ctrl+cmd+r", "command": "jupyter.runallcells"},
  // {"key": "cmd+enter", "command": "jupyter.runcell"},
  // {"key": "ctrl+cmd+a", "command": "jupyter.runallcellsabove.palette"},
  // {"key": "ctrl+cmd+b", "command": "jupyter.runcurrentcellandallbelow.palette"},
  // {"key": "cmd+enter", "command": "jupyter.runcurrentcell", "when": "editorTextFocus && jupyter.hascodecells && !editorHasSelection && !notebookEditorFocused"},
  // {"key": "ctrl+enter", "command": "-jupyter.runcurrentcell", "when": "editorTextFocus && jupyter.hascodecells && !editorHasSelection && !notebookEditorFocused"},
  // {"key": "shift+cmd+enter", "command": "jupyter.runcurrentcelladvance", "when": "editorTextFocus && jupyter.hascodecells && !editorHasSelection && !notebookEditorFocused"},
  // {"key": "shift+enter", "command": "-jupyter.runcurrentcelladvance", "when": "editorTextFocus && jupyter.hascodecells && !editorHasSelection && !notebookEditorFocused"},
  // {"key": "cmd+enter", "command": "jupyter.notebookeditor.runselectedcell"},

  // Markdown
  {"key": "cmd+enter", "command": "markdown-checkbox.markCheckbox", "when": "!notebookEditorFocused && editorLangId == 'markdown'"},
  {"key": "shift+cmd+enter", "command": "markdown-checkbox.markCheckbox", "when": "!notebookEditorFocused && editorLangId == 'markdown'"},
  {"key": "shift+cmd+enter", "command": "-markdown-checkbox.markCheckbox", "when": "editorTextFocus"},
  {"key": "shift+cmd+c", "command": "-markdown-checkbox.createCheckbox", "when": "editorTextFocus"},
  {"key": "shift+cmd+v", "command": "markdown.showPreviewToSide", "when": "!notebookEditorFocused && editorLangId == 'markdown'"},
  {"key": "shift+cmd+v", "command": "-markdown.showPreview", "when": "!notebookEditorFocused && editorLangId == 'markdown'"},

  // TODO Organize
  {"key": "cmd+b", "command": "-workbench.action.toggleSidebarVisibility"},
  {"key": "cmd+0", "command": "workbench.action.zoomReset"},
  {"key": "cmd+numpad0", "command": "-workbench.action.zoomReset"},
  {"key": "m", "command": "renameFile", "when": "explorerViewletVisible && filesExplorerFocus && !explorerResourceIsRoot && !explorerResourceReadonly && !inputFocus"},
  {"key": "enter", "command": "-renameFile", "when": "explorerViewletVisible && filesExplorerFocus && !explorerResourceIsRoot && !explorerResourceReadonly && !inputFocus"},
  {"key": "enter", "command": "explorer.openAndPassFocus", "when": "explorerViewletVisible && filesExplorerFocus && !explorerResourceIsFolder && !inputFocus"},
  {"key": "cmd+down", "command": "-explorer.openAndPassFocus", "when": "explorerViewletVisible && filesExplorerFocus && !explorerResourceIsFolder && !inputFocus"},
  {"key": "l", "command": "breadcrumbs.focusNextWithPicker", "when": "breadcrumbsActive && breadcrumbsVisible && listFocus && !inputFocus"},
  {"key": "h", "command": "breadcrumbs.focusPreviousWithPicker", "when": "breadcrumbsActive && breadcrumbsVisible && listFocus && !inputFocus"},
  {"key": "shift+cmd+;", "command": "-breadcrumbs.focus", "when": "breadcrumbsPossible"},
  {"key": "shift+cmd+o", "command": "-workbench.action.gotoSymbol"},
  {"key": "shift+cmd+o", "command": "breadcrumbs.focusAndSelect", "when": "breadcrumbsPossible"},
  {"key": "shift+cmd+o", "command": "breadcrumbs.selectEditor", "when": "breadcrumbsActive && breadcrumbsVisible"},
  {"key": "ctrl+j", "command": "-editor.action.joinLines", "when": "editorTextFocus && !editorReadonly"},
  {"key": "ctrl+k", "command": "editor.action.insertCursorAbove", "when": "editorTextFocus"},
  {"key": "alt+cmd+up", "command": "-editor.action.insertCursorAbove", "when": "editorTextFocus"},
  {"key": "alt+cmd+m", "command": "editor.action.marker.nextInFiles", "when": "editorFocus"},
  {"key": "f8", "command": "-editor.action.marker.nextInFiles", "when": "editorFocus"},
  {"key": "cmd+m", "command": "editor.action.marker.next", "when": "editorFocus"},
  {"key": "alt+f8", "command": "-editor.action.marker.next", "when": "editorFocus"},
  {"key": "ctrl+cmd+m", "command": "editor.action.marker.prev", "when": "editorFocus"},
  {"key": "shift+alt+f8", "command": "-editor.action.marker.prev", "when": "editorFocus"},
  {"key": "ctrl+alt+cmd+m", "command": "editor.action.marker.prevInFiles", "when": "editorFocus"},
  {"key": "shift+f8", "command": "-editor.action.marker.prevInFiles", "when": "editorFocus"},
  {"key": "ctrl+cmd+m", "command": "fileutils.moveFile"},
  {"key": "n", "command": "explorer.newFile", "when": "explorerViewletVisible && filesExplorerFocus && !explorerResourceIsRoot && !explorerResourceReadonly && !inputFocus"},

]
